OUTDIR = ./bin
OBJECTS = $(OUTDIR)/uARM_driver.o $(OUTDIR)/UART.o $(OUTDIR)/main.o

VPATH = src

#CC = ~/WRTnodeSDK_14_2_28/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.6-linaro_uClibc-0.9.33.2/bin/mipsel-openwrt-linux-uclibc-gcc
CC = gcc

uArm: $(OBJECTS)
	$(CC) -o $(OUTDIR)/uArm $(OBJECTS) -lm

$(OUTDIR)/main.o: main.c UART.h uARM_driver.h
	$(CC) -c $(VPATH)/main.c -o $(OUTDIR)/main.o
$(OUTDIR)/uARM_driver.o: uARM_driver.h
	$(CC) -c $(VPATH)/uARM_driver.c -lm -o $(OUTDIR)/uARM_driver.o
$(OUTDIR)/UART.o: UART.h
	$(CC) -c $(VPATH)/UART.c -o $(OUTDIR)/UART.o

.PHONY: clean
clean:
	-rm $(OUTDIR)/uArm $(OUTDIR)/$(OBJECTS)
